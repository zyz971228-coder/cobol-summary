{
  "Input_folder_path": "/data/projects/cobol-test/Cobol_Summary_Gen/Input",
  "Processing_folder_path": "/data/projects/cobol-test/Cobol_Summary_Gen/Processing",
  "Output_folder_path": "/data/projects/cobol-test/Cobol_Summary_Gen/Output",
  "Completed_folder_path": "/data/projects/cobol-test/Cobol_Summary_Gen/Completed",
  "RAGflow_chat_id": "149db760992811f0a66ac6bd5eda7c92",
  "Ragflow_chat_API_key": "ragflow-M0ODQ4MzhhOTgyYzExZjBiZWI3ZTIxOT",
  "System_prompt": "# Role\nYou are a professional business analyst with more than 20-year experience in a world class software development company. Having technical user from the bank as the audience of your documentation. The bank is now requesting you to write a technical specification document on the cobol code they provide. Please provide information in a business formal, technical and professional style. Please write in a concise and informative tone. By referring to the knowledge base in the manual dataset, it gives you a better understanding of the cobol structure and definition.\nHere is the knowledge base:\n{knowledge}\nThe above is the knowledge base.\n\n# Task\nYour primary task is to analyze the COBOL code file in the path below running on HP non-stop tandem provided by the user and generate a comprehensive, structured Markdown technical document. User may ask you specific question regarding the cobol file, answer the question base on the understanding of the file.\n\n# Constraints and Limitations\n* **Adhere to Original Text**: All explanations and analyses must strictly be based on the provided COBOL code; do not guess or add functionalities do not present in the code.\n* **Professional Terminology**: Use professional and accurate terminology while ensuring clarity.\n* **Language**: Conduct analysis and documentation writing in English.\n* **Format**: Strictly follow the defined Markdown output format below, without omitting any part.\n* **Line References**: When describing code content, always indicate the source line range (e.g., \"From Line X to Line Y\") so readers can trace back to the original code.",
  "Prompt_1": "By analyzing {file_name} in knowledge base, provide the Program Overview, write no less than 300 words in this session. Generate the Program Overview one time only, do not repeat. Strictly follow the defined Markdown output format below, without omitting any part. Do not need to show the word count.\nFor each part of the overview, indicate the source line range in the original code (e.g., \"Based on Line X to Line Y\").\n\n## 1. Program Overview\n* **Program ID**: `[Extracted from IDENTIFICATION DIVISION]` (From Line [X] to Line [Y])\n* **Function Description**: A concise summary of the program's main business purpose.\n* **Main Processes **: List out all the processes in the cobol program, by looking into the PROCEDURE DIVISION. For each process, indicate its line range (e.g., From Line [X] to Line [Y]).",
  "Prompt_2": "By analyzing {file_name} in knowledge base, provide the Flowchart. Use Mermaid syntax to visualize the main execution flow of `PROCEDURE DIVISION`.\nPlease strictly generate the document in the following Markdown structure:\n\n## 2. Flowchart\n(Based on PROCEDURE DIVISION, From Line [X] to Line [Y])\n\n```mermaid\ngraph TD\n    A[Start] --> B[Read Input File];\n    B --> C[End of File?];\n    C -- Yes --> D[Close Files];\n    C -- No --> E[Process Record];\n    E --> F[Write to Output File];\n    F --> B;\n    D --> G[End];\n```",
  "Prompt_3": "By analyzing {file_name} in knowledge base, provide the Input/Output of the code in below md format.\nFor each input/output file, indicate the line range where it is defined or referenced in the original code.\n\n## 3. Input/Output\n* **Input**:\n    * `[Input File Name 1]`: [Briefly describe the purpose and key fields of this file]. (Defined at Line [X] to Line [Y])\n    * `[Input File Name 2]`: ...\n\t...\n* **Output**:\n    * `[Output File Name 1]`: [Briefly describe the purpose and generation method of this file]. (Defined at Line [X] to Line [Y])\n    * `[Output File Name 2]`: ...\n\t...",
  "Prompt_4": "By analyzing {file_name} in knowledge base, provide the Program Structure Analysis of the code in below md format.\nFor each division/section, indicate the source line range in the original code (e.g., \"From Line X to Line Y\").\n\n## 4. Program Structure Analysis\n* **`IDENTIFICATION DIVISION`**: Metadata information of the program, such as author, date, etc. (From Line [X] to Line [Y])\n* **`ENVIRONMENT DIVISION`**: Describes the program's runtime environment, especially `FILE-CONTROL` related to files. (From Line [X] to Line [Y])\n* **`DATA DIVISION`**:\n    * **`FILE SECTION`**: Defines input/output files (FD) used by the program and their record layouts. (From Line [X] to Line [Y])\n    * **`WORKING-STORAGE SECTION`**: Describes key variables, flags, counters, and data structures used internally in the program. (From Line [X] to Line [Y])\n* **`PROCEDURE DIVISION`**: The core logic of the program, describing major paragraphs and their functions. (From Line [X] to Line [Y])",
  "Prompt_5": "By analyzing {file_name} in knowledge base,\nFirst, list out all the functions by looking for the PERFORM (`perform`) in `PROCEDURE DIVISION` in logical order and provide the line no for that function.\nDo not miss out any `perform` in the `PROCEDURE DIVISION`.\nIf the function is calling another sub-function, please list out all the sub-function being called in the main function.\nList all the sub-functions being called as a normal function after all the main function.\nSecond, provide the mermaid flowchart and detailed steps for each function.\nFor both flowcharts and steps, it has to be as detailed as possible to capture all detailed logic of the function.\nDetailed validation rules, default values, error handling must be clearly stated in the steps.\nThe steps have to be in sync with the flowchart.\nWrite no less than 150 words for each function.\nDo not need to generate other section such as overview, flowchart, input/output, Program Structure Analysis. Only need to generate the Detailed Core Logic part.\nFor each function, clearly indicate the source line range (From Line X to Line Y) so readers can trace back to the original code.\nprovide the Detailed Core Logic of the code in below md format.\n\n## 5. Detailed Core Logic\n\n* **Function List**:\n    * `[Function 1]`: From Line [150] to line [200]. [Function 1] is calling [Sub-function 1]\n    * `[Function 2]`: From Line [205] to line [249].\n\t* `[Sub-function 1]`: From Line [833] to line [892]. [Sub-function 1] is calling [Sub-function 2]\n\t* `[Sub-function 2]`: From Line [916] to line [990].\n\t...\n\n* **`[Function 1]`** (From Line [150] to Line [200]):\n\t```mermaid\n\tgraph TD\n\t\tflowchart for Function 1\n\t```\n    * [Step 1, describe the first step of Function 1 in detail]\n\t* [Step 2, describe the second step of Function 1 in detail]\n\t...\n\n* **`[Function 2]`** (From Line [205] to Line [249]):\n\t```mermaid\n\tgraph TD\n\t\tflowchart for Function 2\n\t```\n    * [Step 1, describe the first step of Function 2 in detail]\n\t* [Step 2, describe the second step of Function 2 in detail]\n\t...\n...",
  "Prompt_6": "By analyzing {file_name} in knowledge base, provide the Dependencies of the code in below md format, list out all the copybooks and called program, do not miss out one of it.\nFor Copybooks, please look for the `COPY` statements in the code.\nFor Called Program, please look for the `CALL` statements in the code.\nFor each dependency, indicate the line number where it appears in the original code.\n\n## 6. Dependencies\n  * **Copybooks**:\n      * `[COPY 'COPYBOOK1.CPY']`: [Briefly explain the purpose of this copybook, e.g., record definitions]. (At Line [X])\n\t  * `[COPY 'COPYBOOK2.CPY']`: [Briefly explain the purpose of this copybook, e.g., record definitions]. (At Line [X])\n\t  ...\n  * **Called Programs**:\n      * `[CALL 'SUBPROG1']`: [Briefly explain the purpose of calling this subroutine]. (At Line [X])\n\t  * `[CALL 'SUBPROG2']`: [Briefly explain the purpose of calling this subroutine]. (At Line [X])\n\t  ..."
}
